# Онлайн магазин
Реализация онлайн магазина в рамках стажировки в компании ТамТэк.

## Сборка и запуск

### База данных
Логин, пароль пользователя и имя базы данных необходимо указать в файле настроек.
База данных должна иметь кодировку UTF-8.

Файлы настроек находятся в ``src/main/resources``:

| Имя файла | Назначение |
| --------- | ---------- |
| application.properties | Настройки Spring и DB для запуска из .jar |
| config.properties | Конфигурация сервера для запуска из .jar |
| application-production.properties | Настройки Spring и DB для запуска из Docker'a |
| config-production.properties | Конфигурация сервера для запуска из Docker'a | 

### Сборка 
Собираем jar файл:
```bash
gradle jar
```

### Запуск
Запустить онлайн магазин можно прямо из jar, но мы будем использовать docker, так как он облегчает
разворачивание нашего сервиса на сервера. Убедитесь что вы создали файлы ``application-production.properties``
и ``config-production.properties``, так как Docker image использует именно эти файлы настроек.

Создаём Docker образ:
```bash
sudo docker build . -t onlineshop
```

Запускаем Docker контейнер:
```bash
sudo docker run -p 80:80 -d onlineshop
```

### Конфигурация сервера
Конфигурацию сервера можно прописать в файле ``config.properties``. Сервер поддерживает 
следующие параметры:

| Параметр        | Тип | По умолчанию | Описание |
| --------        | --- | ------------ | -------- |
| rest_http | int | 8888 | Порт, на котором работает REST-сервер |
| max_name_length | int | 50 | Максимальная длина имени |
| min_password_length | int | 8 | Минимальная длина пароля |

#### Почтовая рассылка
Сервер поддерживает почтовую рассылку (отправка уведомлений о покупке товара на почту
клиента и т.п.) через Mailgun API. Для включения почтовой рассылки достаточно указать два параметра:

| Параметр        | Тип  | Описание |
| --------        | ---  | -------- |
| mail_domain     | string | Домен, с которого производится отправка |
| mail_api_key    | string | Секретный ключ для работы с API Mailgun |


